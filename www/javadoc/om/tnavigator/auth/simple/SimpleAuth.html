<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_01) on Mon Feb 11 15:48:05 GMT 2008 -->
<TITLE>
SimpleAuth
</TITLE>

<META NAME="date" CONTENT="2008-02-11">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SimpleAuth";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../om/tnavigator/auth/simple/SimpleUncheckedUser.html" title="class in om.tnavigator.auth.simple"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?om/tnavigator/auth/simple/SimpleAuth.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SimpleAuth.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
om.tnavigator.auth.simple</FONT>
<BR>
Class SimpleAuth</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>om.tnavigator.auth.simple.SimpleAuth</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>SimpleAuth</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></DL>
</PRE>

<P>
Simple implementation of authentication that just uses extra database tables.

 Tables
 ------
 simpleauth_users(username,password,[optional]email)
 simpleauth_groups(username,groupname)
 Usernames and group names must contain only alphanumerics.

 Authentication
 --------------
 Authentication is stored in a cookie 'simpleauth':
 username:passwordhash
 The password hash is created by:
 1) Take user's password.
 2) Append current magic number (as string).
 3) Calculate SHA-1 hash.
 The magic number is generated at random when the system starts up.
 Note that I'm not certain how secure this method is, in particular it might
 be better to change the number periodically... Also, Om is not intended
 to be secure at any level without the use of SSL (https) connections.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_om.tnavigator.auth.Authentication"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from interface om.tnavigator.auth.<A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#EMAIL_CONFIRMSUBMIT">EMAIL_CONFIRMSUBMIT</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#SimpleAuth(om.tnavigator.NavigatorServlet)">SimpleAuth</A></B>(<A HREF="../../../../om/tnavigator/NavigatorServlet.html" title="class in om.tnavigator">NavigatorServlet</A>&nbsp;ns)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Standard constructor.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#becomeTestUser(javax.servlet.http.HttpServletResponse, java.lang.String)">becomeTestUser</A></B>(javax.servlet.http.HttpServletResponse&nbsp;response,
               java.lang.String&nbsp;suffix)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set up this user's browser with a cookie that will mark them out as
 one of the test users.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close the authentication system when it will not be used again</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#getLoginOfferXHTML(javax.servlet.http.HttpServletRequest)">getLoginOfferXHTML</A></B>(javax.servlet.http.HttpServletRequest&nbsp;request)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Obtains text used to offer the chance for local users to log in when accessing
 a test that is world-visible so doesn't require them to log in.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../om/tnavigator/auth/UncheckedUserDetails.html" title="interface in om.tnavigator.auth">UncheckedUserDetails</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#getUncheckedUserDetails(javax.servlet.http.HttpServletRequest)">getUncheckedUserDetails</A></B>(javax.servlet.http.HttpServletRequest&nbsp;request)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Obtain basic details for the user without checking that they are
 authenticated.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../om/tnavigator/auth/UserDetails.html" title="interface in om.tnavigator.auth">UserDetails</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#getUserDetails(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, boolean)">getUserDetails</A></B>(javax.servlet.http.HttpServletRequest&nbsp;request,
               javax.servlet.http.HttpServletResponse&nbsp;response,
               boolean&nbsp;bRequireLogin)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Obtains details for the user and checks that they are authenticated.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#handleRequest(java.lang.String, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)">handleRequest</A></B>(java.lang.String&nbsp;subPath,
              javax.servlet.http.HttpServletRequest&nbsp;request,
              javax.servlet.http.HttpServletResponse&nbsp;response)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handle a user request inside the /!auth/ path.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#obtainPerformanceInfo(java.util.Map)">obtainPerformanceInfo</A></B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;m)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add performance information for status page (if any) to the map.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#redirect(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)">redirect</A></B>(javax.servlet.http.HttpServletRequest&nbsp;request,
         javax.servlet.http.HttpServletResponse&nbsp;response)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends redirect to login page.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../om/tnavigator/auth/simple/SimpleAuth.html#sendMail(java.lang.String, java.lang.String, java.lang.String, int)">sendMail</A></B>(java.lang.String&nbsp;username,
         java.lang.String&nbsp;personID,
         java.lang.String&nbsp;content,
         int&nbsp;emailType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends email to a user.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="SimpleAuth(om.tnavigator.NavigatorServlet)"><!-- --></A><H3>
SimpleAuth</H3>
<PRE>
public <B>SimpleAuth</B>(<A HREF="../../../../om/tnavigator/NavigatorServlet.html" title="class in om.tnavigator">NavigatorServlet</A>&nbsp;ns)
           throws java.sql.SQLException</PRE>
<DL>
<DD>Standard constructor. Creates database tables if they don't already exist.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>ns</CODE> - Servlet
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - If any problem creating tables</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="becomeTestUser(javax.servlet.http.HttpServletResponse, java.lang.String)"><!-- --></A><H3>
becomeTestUser</H3>
<PRE>
public void <B>becomeTestUser</B>(javax.servlet.http.HttpServletResponse&nbsp;response,
                           java.lang.String&nbsp;suffix)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#becomeTestUser(javax.servlet.http.HttpServletResponse, java.lang.String)">Authentication</A></CODE></B></DD>
<DD>Set up this user's browser with a cookie that will mark them out as
 one of the test users.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#becomeTestUser(javax.servlet.http.HttpServletResponse, java.lang.String)">becomeTestUser</A></CODE> in interface <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>response</CODE> - HTTP response for setting cookies<DD><CODE>suffix</CODE> - Test user ID</DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#close()">Authentication</A></CODE></B></DD>
<DD>Close the authentication system when it will not be used again
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#close()">close</A></CODE> in interface <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getLoginOfferXHTML(javax.servlet.http.HttpServletRequest)"><!-- --></A><H3>
getLoginOfferXHTML</H3>
<PRE>
public java.lang.String <B>getLoginOfferXHTML</B>(javax.servlet.http.HttpServletRequest&nbsp;request)
                                    throws java.io.IOException</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#getLoginOfferXHTML(javax.servlet.http.HttpServletRequest)">Authentication</A></CODE></B></DD>
<DD>Obtains text used to offer the chance for local users to log in when accessing
 a test that is world-visible so doesn't require them to log in. (The
 advantage of logging in is that your progress can be stored if you move
 to a different computer.)
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#getLoginOfferXHTML(javax.servlet.http.HttpServletRequest)">getLoginOfferXHTML</A></CODE> in interface <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>request</CODE> - HTTP request
<DT><B>Returns:</B><DD>XHTML text offering login chance, including link to login page
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If there is any problem</DL>
</DD>
</DL>
<HR>

<A NAME="getUncheckedUserDetails(javax.servlet.http.HttpServletRequest)"><!-- --></A><H3>
getUncheckedUserDetails</H3>
<PRE>
public <A HREF="../../../../om/tnavigator/auth/UncheckedUserDetails.html" title="interface in om.tnavigator.auth">UncheckedUserDetails</A> <B>getUncheckedUserDetails</B>(javax.servlet.http.HttpServletRequest&nbsp;request)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#getUncheckedUserDetails(javax.servlet.http.HttpServletRequest)">Authentication</A></CODE></B></DD>
<DD>Obtain basic details for the user without checking that they are
 authenticated. Should be a fast operation compared to getUserDetails,
 ideally requiring no database access. (In other words, if you can get
 their username from the cookie directly.)
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#getUncheckedUserDetails(javax.servlet.http.HttpServletRequest)">getUncheckedUserDetails</A></CODE> in interface <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>request</CODE> - HTTP request
<DT><B>Returns:</B><DD>User details (all set to null if they aren't logged in)</DL>
</DD>
</DL>
<HR>

<A NAME="getUserDetails(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, boolean)"><!-- --></A><H3>
getUserDetails</H3>
<PRE>
public <A HREF="../../../../om/tnavigator/auth/UserDetails.html" title="interface in om.tnavigator.auth">UserDetails</A> <B>getUserDetails</B>(javax.servlet.http.HttpServletRequest&nbsp;request,
                                  javax.servlet.http.HttpServletResponse&nbsp;response,
                                  boolean&nbsp;bRequireLogin)
                           throws java.io.IOException</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#getUserDetails(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, boolean)">Authentication</A></CODE></B></DD>
<DD>Obtains details for the user and checks that they are authenticated.
 If getUncheckedUserDetails would have returned valid data, but
 getUserDetails discovers that this is correct, the situation should be
 changed so that in future (e.g. after a redirect) getUncheckedUserDetails
 will return null. Or to put that another way: if the authentication cookie
 turns out to be invalid, clear it here.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#getUserDetails(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, boolean)">getUserDetails</A></CODE> in interface <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>request</CODE> - HTTP request from user<DD><CODE>response</CODE> - HTTP response (used only if redirecting or to clear
   cookies)<DD><CODE>bRequireLogin</CODE> - True if login is required and therefore invalid
   logins should be redirected
<DT><B>Returns:</B><DD>User details or null if user has been redirected and other
   processing should cease (applies only if bRequireLogin is set)
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If there is an authentication error</DL>
</DD>
</DL>
<HR>

<A NAME="handleRequest(java.lang.String, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)"><!-- --></A><H3>
handleRequest</H3>
<PRE>
public boolean <B>handleRequest</B>(java.lang.String&nbsp;subPath,
                             javax.servlet.http.HttpServletRequest&nbsp;request,
                             javax.servlet.http.HttpServletResponse&nbsp;response)
                      throws java.lang.Exception</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#handleRequest(java.lang.String, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)">Authentication</A></CODE></B></DD>
<DD>Handle a user request inside the /!auth/ path. Should only be used to offer
 necessary login screens and suchlike.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#handleRequest(java.lang.String, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)">handleRequest</A></CODE> in interface <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>subPath</CODE> - Path after /!auth/
<DT><B>Returns:</B><DD>True if request URL is handled, false if it's not
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - Exceptions will be displayed as server errors</DL>
</DD>
</DL>
<HR>

<A NAME="obtainPerformanceInfo(java.util.Map)"><!-- --></A><H3>
obtainPerformanceInfo</H3>
<PRE>
public void <B>obtainPerformanceInfo</B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;m)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#obtainPerformanceInfo(java.util.Map)">Authentication</A></CODE></B></DD>
<DD>Add performance information for status page (if any) to the map. Map
 names should match tokens on the status page.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#obtainPerformanceInfo(java.util.Map)">obtainPerformanceInfo</A></CODE> in interface <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - Performance map</DL>
</DD>
</DL>
<HR>

<A NAME="redirect(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)"><!-- --></A><H3>
redirect</H3>
<PRE>
public void <B>redirect</B>(javax.servlet.http.HttpServletRequest&nbsp;request,
                     javax.servlet.http.HttpServletResponse&nbsp;response)
              throws java.io.IOException</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#redirect(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)">Authentication</A></CODE></B></DD>
<DD>Sends redirect to login page.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#redirect(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)">redirect</A></CODE> in interface <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>request</CODE> - HTTP request (will come back here later)<DD><CODE>response</CODE> - HTTP response
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Any error in sending redirect</DL>
</DD>
</DL>
<HR>

<A NAME="sendMail(java.lang.String, java.lang.String, java.lang.String, int)"><!-- --></A><H3>
sendMail</H3>
<PRE>
public java.lang.String <B>sendMail</B>(java.lang.String&nbsp;username,
                                 java.lang.String&nbsp;personID,
                                 java.lang.String&nbsp;content,
                                 int&nbsp;emailType)
                          throws java.io.IOException</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#sendMail(java.lang.String, java.lang.String, java.lang.String, int)">Authentication</A></CODE></B></DD>
<DD>Sends email to a user. Email will only be sent according to the defined
 EMAIL_xx types.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html#sendMail(java.lang.String, java.lang.String, java.lang.String, int)">sendMail</A></CODE> in interface <CODE><A HREF="../../../../om/tnavigator/auth/Authentication.html" title="interface in om.tnavigator.auth">Authentication</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>username</CODE> - Username of recipient<DD><CODE>personID</CODE> - Person ID of recipient<DD><CODE>content</CODE> - Content of email (text only). First line is subject.<DD><CODE>emailType</CODE> - EMAIL_xx constant.
<DT><B>Returns:</B><DD>Optional information about mail send, for log. (Use "" if none.)
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If there is any problem sending the email</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../om/tnavigator/auth/simple/SimpleUncheckedUser.html" title="class in om.tnavigator.auth.simple"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?om/tnavigator/auth/simple/SimpleAuth.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SimpleAuth.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
